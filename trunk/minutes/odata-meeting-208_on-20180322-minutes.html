<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>OData TC meeting #208 Thursday March 22, 2018</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
body{-webkit-font-smoothing:antialiased;font-family:Cambria,Arial,Verdana,sans-serif;margin:0} body {margin-left:2%}
body,p,td,div{color:#111;font-family:"Helvetica Neue",Helvetica,Arial,Verdana,sans-serif;/*word-wrap:break-word*/}
h1,h2,h3,h4,h5,h6{line-height:1.5em}
a{-webkit-transition:color .2s ease-in-out;color:#0d6ea1;text-decoration:none}
a:hover{color:#3593d9}.footnote{color:#0d6ea1;font-size:.8em;vertical-align:super}dd{margin-bottom:1em}
li>p:first-child{margin:0}ul ul,ul ol{margin-bottom:.4em}.poetry
pre{display:block;font-family:Georgia,Garamond,serif!important;font-size:110%!important;font-style:italic;line-height:1.6em;margin-left:1em}
.poetry pre code{font-family:Georgia,Garamond,serif!important}
sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;position:relative;vertical-align:super}sub{vertical-align:sub;top:-1px}
p,h5{font-size:1.1429em;line-height:1.3125em;margin:1.3125em 0}dt,th{font-weight:700}p{margin:0.7ex 2.0em}pre{margin-left:4em;}
p.note{font-size:75%}
.code-like{font-family:monospace;font-size:120%!important}
@media print{body{overflow:auto}
#wrapper{background:#fff;color:#303030;font-size:85%;padding:10px;position:relative;text-indent:0}}
@media screen{/*::selection{background:rgba(157,193,200,.5)}*/.inverted{background:#333}
.inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted pre,.inverted code,.inverted th{color:#eee!important}
.inverted a{color:#fff;text-decoration:underline}#wrapper{padding:20px}.inverted #wrapper{background:#333}}
</style>
<!-- # grep -v excluding_those_lines __file__ |shasum -a 512 -->
<!-- sha512_excluding_those_lines='182eecdb67b81ad8c8efe7a63dc946fd48d4a7ca8a1a4e170fe5dfaa1871177a163542a6f6f0779f691b26b72ce8e3b7f5f63d7529b37f2bdc5d4daf5a3f0628' -->
</head>
<body class="normal">
  <div id="wrapper">
<h1>OData TC meeting #208 Thursday March 22, 2018</h1>
<p>Acting chair: Ralf</p>
<pre>Chat transcript from room: odatatc
2018-03-22 0800-1000 PDT
</pre>
<h2 id="1">1. Roll call</h2>

<h3 id="1.1">1.1 Members present</h3>

<pre>
    George Ericson (Dell)
    Gerald Kraue (SAP SE)
    Hubert Heijkers (IBM)
    Matthew Borges (SAP SE) a.k.a. Matt
    Michael Pizzo (Microsoft) a.k.a. Mike
    Ralf Handl (SAP SE)
    Ramesh Reddy (Red Hat)
    Stefan Hagen (Individual)
    Ted Jones (Red Hat)
</pre>

<p>Quorum achieved. Details cf. <a href="https://www.oasis-open.org/apps/org/workgroup/odata/event.php?event_id=46248">normative attendance sheet for this meeting (event_id=46248)</a>.</p>

<p>Notes taken by all and subsequently edited for readability by Stefan.</p>

<h2 id="2">2. Approve agenda</h2>
<p>Mike: heads-up on feedback from OASIS directors</p>
<p>Ralf: Citation:</p>
<pre>
OData adoption is "off the charts"
</pre>
<p>Ralf: If you know of companies interested in participating in the OData TC, please let Robin Cover (and us) know</p>
<p>Agenda approved unchanged as published</p>

<h2 id="3">3. Approve minutes from previous meeting(s)</h2>
<h3 id="3.1">3.1 Minutes from March 15, 2018 TC meeting #207</h3>
<p><a href="https://www.oasis-open.org/committees/download.php/62704/odata-meeting-207_on-20180315-minutes.html" rel="noopener noreferrer" target="_blank">https://www.oasis-open.org/committees/download.php/62704/odata-meeting-207_on-20180315-minutes.html</a></p>
<p>Minutes approved unchanged as published.</p>

<h2 id="4">4. Review action items [<a href="https://www.oasis-open.org/apps/org/workgroup/odata/members/action_items.php" rel="noopener noreferrer" target="_blank">Link to Action item list</a>]</h2>
<h3 id="4.1">4.1 Action items due</h3>
<p>None</p>


<h2 id="5">5. Issues</h2>

<h3 id="5.1">5.1 V4.01: NEW or OPEN</h3>
<h4 id="5.1.1">5.1.1 <a href="https://issues.oasis-open.org/browse/ODATA-1165" rel="noopener noreferrer" target="_blank">ODATA-1165</a> - Describe $expand and $select via prose text and examples, remove ABNF snippets</h4>
<p>Ralf: <a href="http://docs.oasis-open.org/odata/odata/v4.01/cs01/part2-url-conventions/odata-v4.01-cs01-part2-url-conventions.html#_Toc505773297" rel="noopener noreferrer" target="_blank">http://docs.oasis-open.org/odata/odata/v4.01/cs01/part2-url-conventions/odata-v4.01-cs01-part2-url-conventions.html#_Toc505773297</a></p>
<p>Mike: would be helpful to have an example of how this would look like</p>
<p>Ralf: Just remove ABNF *snippets* from prose spec, keep ABNF as machine-readable work product</p>
<p>Ralf: ODATA-1165 is OPEN</p>

<h4 id="5.1.2">5.1.2 <a href="https://issues.oasis-open.org/browse/ODATA-1163" rel="noopener noreferrer" target="_blank">ODATA-1163</a> - A Case for Common Expressions</h4>
<p>Ralf: Proposal:</p>
<pre>
The case function has the following signatures: 

expression case(Edm.Boolean:expression, ..., Edm.Boolean:expression) 
expression case(Edm.Boolean:expression, ..., Edm.Boolean:expression,expression) 

Each Edm.Boolean:expression parameter is a tuple separated by a colon, 
where the first component evaluates to a Boolean value, and the second component may be an expression of any type. 

The case function returns the expression value of the leftmost parameter, 
whose first component evaluates to true. If none of the parameters match, 
case returns null, unless the last parameter is an expression, whose value is returned otherwise. 

If all parameter expressions are of numeric type, the return value has a numeric type 
capable of representing any of these expressions. Otherwise, the return value is the result 
of casting the expression of the matching parameter to Edm.String.
</pre>
<p>Mike: if all expressions are of the same type, return that type</p>
<p>Mike: If all expressions are of the same type, the return value is of this type</p>
<p>Mike: Key question: is it important to know the type of the expression? Or can we say that the type is dependent upon the value (i.e., the type of the expression is Edm.Any)</p>
<p>Ralf: Homework: check your (intended) implementations on what they require / can deal with</p>
<p>Hubert: How to handle the unknown type of dynamic properties from open types in case result expressions?</p>

<h4 id="5.1.3">5.1.3 <a href="https://issues.oasis-open.org/browse/ODATA-1154" rel="noopener noreferrer" target="_blank">ODATA-1154</a> - Clarify which OData-Version a service should return</h4>
<p>Ralf: Proposed rewording: </p>
<pre>
The service MUST respond with a payload compliant with the greatest version of the protocol 
that is less than or equal to the request's OData-MaxVersion, if specified. 

Questions: 
1) What if no OData-MaxVersion is specified? 
2) Does specifying an OData-Version limit the constructs that the request can use in the URL? 
   i.e., if I have a 4.0 payload, am I restricted to 4.0 URL constructs, even if I know the service supports them? 
3) What if the client *only* support 4.01? Do we have a way to specify NOT to return 4.0? 
4) Does a service have to return a 4.01 payload if the request uses a 4.01 construct?
</pre>
<p>Ralf: Ad 1: Current spec says</p>
<pre>
If OData-MaxVersion is not specified, then the service SHOULD interpret the request as 
having an OData-MaxVersion equal to the maximum version supported by the service.
</pre>
<p>Ralf: Means: return max version the service implements, i.e. the latest and greatest</p>
<p>Hubert: implemented it that way</p>
<p>Mike: can we leave that up to each service?</p>
<p>Mike: We say that an interoperable odata client should specify the odata-maxversion.  in the absence of specifying an odata-maxversion, we should probably leave it up to the service.</p>
<p>Mike: "same request must return same result"</p>
<p>Ralf: This means no MaxVersion is equivalent to MaxVersion:4.0</p>
[16:55] Michael Pizzo: No, it means no maxversion is equivalent to the first (default) version that the service implemented.  If it started as a 4.01 service it might always default to 4.01
<p>Ralf: Yes, now </p>
<p>Ralf: Rephrase spec to:</p>
<pre>
If OData-MaxVersion is not specified, then the service SHOULD interpret the request as 
having an OData-MaxVersion equal to the *initial* version supported by the service
</pre>
<p>Ralf: to keep the service behavior consistent over time</p>
<p>Mike: 1) "initial default version of the service"</p>
<p>Ralf: 2) Does specifying an OData-Version limit the constructs that the request can use in the URL? i.e., if I have a 4.0 payload, am I restricted to 4.0 URL constructs, even if I know the service supports them?</p>
<p>Mike: can a service accept request URLs with e.g. the "in" operator if the client specifies OData-Version:4.0</p>
<p>Mike: yes</p>
<p>Ralf: OData-Version only has to reflect the payload of the request</p>
<p>Ralf: Current text:</p>
<pre>
OData clients SHOULD use the OData-Version header on a request to specify the version of the protocol used to generate the request.
</pre>
<p>Ralf: Rephrase to:</p>
<pre>
OData clients SHOULD use the OData-Version header on a request to specify the version of the protocol used to generate the request *body*.
</pre>
<p>Ralf: Or *payload* -> check what we consistently use</p>
<p>Ralf: 3) What if the client *only* support 4.01? Do we have a way to specify NOT to return 4.0?</p>
<p>Ralf: No MinVersion (yet)</p>
<p>Mike: If the client inspects the metadata to determine the service supports 4.01, and requests a maxversion of 4.01, the above rule requires that the service return 4.01.</p>
<p>Ralf: 4) Does a service have to return a 4.01 payload if the request uses a 4.01 construct?</p>
<p>Mike: OData-Version:4.01 OData-MaxVersion:4.0</p>
<p>George: sounds like too much flexibility</p>
<p>Mike: 4) Request and response payloads are independent. The service must honor OData-MaxVersion in a response regardless of the version of the request payload.</p>
<p>Mike: Similar to the fact that the request payload could be different than a response payload.</p>
<p>Mike: Summarized in issue:</p>
<pre>
1) The same request should return the same response, so in the absence of an odata-maxversion header, 
   the service should return the same payload over time.  "If OData-MaxVersion is not specified, 
   then the service SHOULD interpret the request as having an OData-MaxVersion equal to the 
   *initial default* version produced by the service".
2) Client is allowed to use 4.01 without specifying an OData-Version or OData-MaxVersion of 4.01. 
   A payload MUST specify the OData-Version of the request body.
3) If the client inspects the metadata to determine the service supports 4.01, and requests a maxversion of 4.01, 
   the proposed general rule requires that the service return 4.01 (we can introduce a min version in the future, if required).
4) Request and response payloads are independent. 
   The service must honor OData-MaxVersion in a response regardless of the version of the request payload.
</pre>
<p>Mike: Proposal:</p>
<pre>
The service MUST respond with a payload compliant with the greatest supported version of the protocol 
that is less than or equal to the request's OData-MaxVersion, if specified. 

The same request should return the same response, so in the absence of an odata-maxversion header, 
the service should return the same payload over time.  "If OData-MaxVersion is not specified, 
then the service SHOULD interpret the request as having an OData-MaxVersion equal to the 
*initial default* version produced by the service".

Client is allowed to use 4.01 without specifying an OData-Version or OData-MaxVersion of 4.01. 
If a request has a payload, a compliant client MUST specify the OData-Version of the request body.

If the client inspects the metadata to determine the service supports 4.01, and requests a maxversion of 4.01, 
the proposed general rule requires that the service return 4.01 (we can introduce a min version in the future, if required).

Request and response payloads are independent. The service must honor OData-MaxVersion in a response 
regardless of the version of the request payload.
</pre>
<p><b>Hubert</b>: I <b>move</b> to resolve ODATA-1154 as per the amended proposal. <b>Mike</b> seconds.</p>
<p>Ralf: ODATA-1154 is RESOLVED with the above proposal</p>

<h4 id="5.1.4">5.1.4 <a href="https://issues.oasis-open.org/browse/ODATA-1149" rel="noopener noreferrer" target="_blank">ODATA-1149</a> - Support Delta responses for Singletons</h4>
<p>Ralf: need new context URL pattern to distinguish this from "full object"</p>
<p>Ralf: </p>
<pre>
"@context":"http://host/service/$metadata#Customers/$delta",
"@context":"http://host/service/$metadata#MySingleton/$delta",
</pre>
<p>Mike: In 4.01, the delta response for a singleton is represented as a single top-level object with (possibly nested) changes.<br>
In 4.0, the response could (in theory) be an array containing a flattened response or a single object with nested content showing the after-image.</p>
<p>George: This also applies to single-valued navigation properties?</p>
<p>Mike: Yes, as well as collection-valued navigation properties (which may not have been clear in 4.0)</p>
<p>Mike: Proposal:</p>
<pre>
Deltas can be supported for singletons and single-value navigation properties as well 
as entities and collection-valued navigation properties.

The context url for a delta against a singleton (or single-valued nav prop) follows the 
same pattern of appending /$delta to the context url returned by a request against that singleton (or single-valued nav prop).

The 4.01 JSON payload for a delta request/response rooted in a single object is the single object 
with nested changes (i.e., propertyName@delta).

We don't define a 4.0 JSON format for a delta payload for a request/response rooted in a single object.
</pre>
<p><b>Mike</b>: I <b>move</b> we resolve ODATA-1149 as proposed. <b>Hubert</b> seconds.</p>
<p>Ralf: ODATA-1149 is RESOLVED with the above proposal</p>

<h4 id="5.1.5">5.1.5 <a href="https://issues.oasis-open.org/browse/ODATA-1148" rel="noopener noreferrer" target="_blank">ODATA-1148</a> - PATCH with nested nav props should not remove omitted resources</h4>
<p>Skipped</p>

<h4 id="5.1.6">5.1.6 <a href="https://issues.oasis-open.org/browse/ODATA-1143" rel="noopener noreferrer" target="_blank">ODATA-1143</a> - Extend the Property metatype to allow a type that is an EntityType.</h4>
<p>Skipped</p>

<h4 id="5.1.7">5.1.7 <a href="https://issues.oasis-open.org/browse/ODATA-1141" rel="noopener noreferrer" target="_blank">ODATA-1141</a> - Upsert: clarify upsert along nullable single-valued navigation path</h4>
<p>Skipped</p>

<h4 id="5.1.8">5.1.8 <a href="https://issues.oasis-open.org/browse/ODATA-1135" rel="noopener noreferrer" target="_blank">ODATA-1135</a> - Document use of JSON $schema</h4>
<p>Skipped</p>

<h4 id="5.1.9">5.1.9 <a href="https://issues.oasis-open.org/browse/ODATA-1088" rel="noopener noreferrer" target="_blank">ODATA-1088</a> - Clarify effect of applying an Annotation to an element</h4>
<p>Skipped</p>


<h3 id="5.2">5.2 Vocabularies: NEW or OPEN with concrete proposal</h3>
<h4 id="5.2.1">5.2.1 <a href="https://issues.oasis-open.org/browse/ODATA-1167" rel="noopener noreferrer" target="_blank">ODATA-1167</a> - Add way to specify which batch formats (if any) are supported by a service</h4>
<p>Skipped</p>

<h4 id="5.2.2">5.2.2 <a href="https://issues.oasis-open.org/browse/ODATA-1064" rel="noopener noreferrer" target="_blank">ODATA-1064</a> - Add ability to annotate collections to return only count and NextLink</h4>
<p>Skipped</p>


<h3 id="5.3">5.3 Vocabularies: NEW or OPEN that need more discussion</h3>
<h4 id="5.3.1">5.3.1 <a href="https://issues.oasis-open.org/browse/ODATA-1099" rel="noopener noreferrer" target="_blank">ODATA-1099</a> - Add annotations to describe custom query options and custom headers</h4>
<p>Skipped</p>

<h4 id="5.3.2">5.3.2 <a href="https://issues.oasis-open.org/browse/ODATA-1005" rel="noopener noreferrer" target="_blank">ODATA-1005</a> - Make sure we have capabilities for all new 4.01 functionality</h4>
<p>Skipped</p>

<h4 id="5.3.3">5.3.3 <a href="https://issues.oasis-open.org/browse/ODATA-884" rel="noopener noreferrer" target="_blank">ODATA-884</a> - Add term ErrorCodes to describe possible codes in error messages (public comment c201510e00019)</h4>
<p>Skipped</p>


<h3 id="5.4">5.4 Data Aggregation: NEW or OPEN</h3>
<h4 id="5.4.1">5.4.1 <a href="https://issues.oasis-open.org/browse/ODATA-1162" rel="noopener noreferrer" target="_blank">ODATA-1162</a> - Fix data type in example model</h4>
<p>Skipped</p>

<h4 id="5.4.2">5.4.2 <a href="https://issues.oasis-open.org/browse/ODATA-1161" rel="noopener noreferrer" target="_blank">ODATA-1161</a> - Clarify how to process hybrid results of a transformation in subsequent transformations</h4>
<p>Skipped</p>

<h4 id="5.4.3">5.4.3 <a href="https://issues.oasis-open.org/browse/ODATA-1160" rel="noopener noreferrer" target="_blank">ODATA-1160</a> - Clarify example 66 in section 7.5</h4>
<p>Skipped</p>

<h4 id="5.4.4">5.4.4 <a href="https://issues.oasis-open.org/browse/ODATA-1159" rel="noopener noreferrer" target="_blank">ODATA-1159</a> - Clarify context URLs for aggregated result sets</h4>
<p>Skipped</p>

<h4 id="5.4.5">5.4.5 <a href="https://issues.oasis-open.org/browse/ODATA-1158" rel="noopener noreferrer" target="_blank">ODATA-1158</a> - Transformations for limiting the number of entities in the result of a $apply transformation</h4>
<p>Skipped</p>

<h4 id="5.4.6">5.4.6 <a href="https://issues.oasis-open.org/browse/ODATA-1157" rel="noopener noreferrer" target="_blank">ODATA-1157</a> - Transformation for sorting entities created by a $apply transformation</h4>
<p>Skipped</p>

<h4 id="5.4.7">5.4.7 <a href="https://issues.oasis-open.org/browse/ODATA-1137" rel="noopener noreferrer" target="_blank">ODATA-1137</a> - Clarify type information for dynamic properties in the aggregated result set</h4>
<p>Skipped</p>

<h4 id="5.4.8">5.4.8 <a href="https://issues.oasis-open.org/browse/ODATA-1073" rel="noopener noreferrer" target="_blank">ODATA-1073</a> - Conformance section references wrong annotation term</h4>
<p>Skipped</p>

<h4 id="5.4.9">5.4.9 <a href="https://issues.oasis-open.org/browse/ODATA-1068" rel="noopener noreferrer" target="_blank">ODATA-1068</a> - 3.12 Transformation expand: require at least two parameters, with innermost expansion requiring a filter()</h4>
<p>Skipped</p>

<h4 id="5.4.10">5.4.10 <a href="https://issues.oasis-open.org/browse/ODATA-1041" rel="noopener noreferrer" target="_blank">ODATA-1041</a> - Broaden definitions of transformations topcount and bottomcount</h4>
<p>Skipped</p>


<h2 id="6">6. Next meetings</h2>
<p>Ralf:</p>
<p>Suggested:</p>
<pre>
Thursday March 29, 2018 during 8-10 am PDT (17:00-19:00 CEST) – back to normal time difference, Easter is coming
Thursday April 05, 2018 during 8-10 am PDT (17:00-19:00 CEST) – Week after Easter?
Thursday April 12, 2018 during 8-10 am PDT (17:00-19:00 CEST)
</pre>
<p>Ralf: no meeting next week</p>
<p><b>Agreed</b>:</p>
<pre>
Thursday April 05, 2018 during 8-10 am PDT (17:00-19:00 CEST) – Week after Easter?
Thursday April 12, 2018 during 8-10 am PDT (17:00-19:00 CEST)
</pre>
<p>Ralf: On April 05: Gerald can't, Mike and Matt can, George can</p>

<h2 id="7">7. AOB and wrap up</h2>
<p>None.</p>

<p>Meeting adjourned by chair.</p>
</div>
</body>
</html>
