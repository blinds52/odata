<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Reference Uri="http://tinyurl.com/Org-OData-Core">
    <edmx:Include Alias="Core" Namespace="Org.OData.Core.V1" />
  </edmx:Reference>
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="Org.OData.Capabilities.V1" Alias="Capabilities">
      <Annotation Term="Core.Description">
        <String>
          The Capabilities vocabulary aims to provide a way for service authors to describe
          certain capabilities of an OData Service.
        </String>
      </Annotation>
      <Annotation Term="Core.LongDescription">
        <String>
          There are some capabilities which are strongly recommended for services to support even
          though they are optional. Support for $top and $skip is a good example as
          supporting these query options helps with performance of a service and are essential. Such
          capabilities are assumed to be default capabilities of an OData service even in
          the case that a capabilities annotation doesn’t exist. Capabilities annotations are
          mainly expected to be used to explicitly specify that a service doesn’t support such
          capabilities. Capabilities annotations can as well be used to declaratively
          specify the support of such capabilities.

          On the other hand, there are some capabilities that a service may choose to support or
          not support and in varying degrees. $filter and $orderby are such good examples.
          This vocabulary aims to define terms to specify support or no support for such
          capabilities.

          A service is assumed to support by default the following capabilities even though an
          annotation doesn’t exist:
          - Countability ($count, $inlinecount)
          - Client pageability ($top, $skip)
          - Expandability ($expand)
          - Indexability by key
          - Batch support ($batch)
          - Navigability of navigation properties

          A service is expected to support the following capabilities. If not supported, the
          service is expected to call out the restrictions using annotations:
          - Filterability ($filter)
          - Sortability ($orderby)
          - Queryability of top level entity sets
          - Query functions

          A client cannot assume that a service supports certain capabilities. A client can try, but
          it needs to be prepared to handle an error in case the following capabilities are not
          supported:
          - Insertability
          - Updatability
          - Deletability
        </String>
      </Annotation>

      <Term Name="SupportedFormats" Type="Collection(Edm.String)">
        <Annotation Term="Core.Description" String="Media types of supported formats, including format parameters" />
        <Annotation Term="Core.IsMediaType" />
      </Term>

      <Term Name="ConformanceLevel" Type="Capabilities.ConformanceLevelType" AppliesTo="EntityContainer" />
      <EnumType Name="ConformanceLevelType">
        <Member Name="Minimal" />
        <Member Name="Intermediate" />
        <Member Name="Advanced" />
      </EnumType>

      <Term Name="InsertRestrictions" Type="Capabilities.InsertRestrictionsType" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Restrictions on insert operations" />
      </Term>
      <ComplexType Name="InsertRestrictionsType">
        <Property Name="Insertable" Type="Edm.Boolean">
          <Annotation Term="Core.Description" String="Entities can be inserted" />
        </Property>
        <Property Name="NonInsertableNavigationProperties" Type="Collection(Edm.NavigationPropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These navigation properties do not allow deep inserts" />
        </Property>
      </ComplexType>

      <Term Name="UpdateRestrictions" Type="Capabilities.UpdateRestrictionsType" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Restrictions on update operations" />
      </Term>
      <ComplexType Name="UpdateRestrictionsType">
        <Property Name="Updatable" Type="Edm.Boolean">
          <Annotation Term="Core.Description" String="Entities can be updated" />
        </Property>
        <Property Name="NonUpdatableNavigationProperties" Type="Collection(Edm.NavigationPropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These navigation properties do not allow rebinding" />
        </Property>
      </ComplexType>

      <Term Name="DeleteRestrictions" Type="Capabilities.DeleteRestrictionsType" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Restrictions on delete operations" />
      </Term>
      <ComplexType Name="DeleteRestrictionsType">
        <Property Name="Deletable" Type="Edm.Boolean">
          <Annotation Term="Core.Description" String="Entities can be deleted" />
        </Property>
        <Property Name="NonDeletableNavigationProperties" Type="Collection(Edm.NavigationPropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These navigation properties do not allow DeleteLink requests" />
        </Property>
      </ComplexType>

      <!-- TODO: morph this into CountRestrictions and specify properties where /$count cannot be appended in $filter -->
      <Term Name="Countable" Type="Core.Tag" DefaultValue="true" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Supports /$count path suffix and $count=true system query option" />
      </Term>

      <!-- TODO: ClientPagingRestrictions: CannotSkip, CannotTop, default false -->
      <Term Name="CanTop" Type="Core.Tag" DefaultValue="true" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Supports $top" />
      </Term>
      <Term Name="CanSkip" Type="Core.Tag" DefaultValue="true" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Supports $skip" />
      </Term>

      <Term Name="Navigable" Type="Core.Tag" DefaultValue="true" AppliesTo="NavigationProperty">
        <Annotation Term="Core.Description" String="Supports navigation paths according to OData URL conventions" />
      </Term>

      <Term Name="IndexableByKey" Type="Core.Tag" DefaultValue="true" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Supports key values according to OData URL conventions" />
      </Term>

      <Term Name="BatchSupported" Type="Core.Tag" DefaultValue="true" AppliesTo="EntityContainer">
        <Annotation Term="Core.Description" String="Supports $batch requests" />
      </Term>

      <Term Name="AcceptEncoding" Type="Collection(Edm.String)" AppliesTo="EntityContainer">
        <Annotation Term="Core.Description" String="List of acceptable compression methods for ($batch) requests, e.g. gzip" />
      </Term>

      <Term Name="FilterFunctions" Type="Collection(Edm.String)" AppliesTo="EntityContainer EntitySet">
        <Annotation Term="Core.Description" String="List of functions supported in $filter" />
      </Term>

      <Term Name="FilterRestrictions" Type="Capabilities.FilterRestrictionsType" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Restrictions on $filter expressions" />
      </Term>
      <ComplexType Name="FilterRestrictionsType">
        <Property Name="Filterable" Type="Edm.Boolean">
          <Annotation Term="Core.Description" String="$filter is supported" />
        </Property>
        <Property Name="RequiredProperties" Type="Collection(Edm.PropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These properties must be specified in the $filter clause (properties of derived types are not allowed here)" />
        </Property>
        <Property Name="NonFilterableProperties" Type="Collection(Edm.PropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These properties cannot be used in $filter expressions" />
        </Property>
      </ComplexType>

      <Term Name="SortRestrictions" Type="Capabilities.SortRestrictionsType" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Restrictions on $orderby expressions" />
      </Term>
      <ComplexType Name="SortRestrictionsType">
        <Property Name="Sortable" Type="Edm.Boolean">
          <Annotation Term="Core.Description" String="$orderby is supported" />
        </Property>
        <Property Name="AscendingOnlyProperties" Type="Collection(Edm.PropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These properties can only be used for sorting in Ascending order" />
        </Property>
        <Property Name="DescendingOnlyProperties" Type="Collection(Edm.PropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These properties can only be used for sorting in Descending order" />
        </Property>
        <Property Name="UnsortableProperties" Type="Collection(Edm.PropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="These properties cannot be used in $orderby expressions" />
        </Property>
      </ComplexType>

      <Term Name="ChangeTracking" Type="Capabilities.ChangeTrackingType" AppliesTo="EntitySet">
        <Annotation Term="Core.Description" String="Change tracking capabilities of this entity set" />
      </Term>
      <ComplexType Name="ChangeTrackingType">
        <Property Name="Supported" Type="Edm.Boiolean" DefaultValue="true">
          <Annotation Term="Core.Description" String="This entity set supports the odata.track-changes preferenc" />
        </Property>
        <Property Name="FilterableProperties" Type="Collection(Edm.PropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="Change tracking supports filters on these properties" />
        </Property>
        <Property Name="ExpandableProperties" Type="Collection(Edm.NavigationPropertyPath)" Nullable="true">
          <Annotation Term="Core.Description" String="Change tracking supports these properties expanded" />
        </Property>
      </ComplexType>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>