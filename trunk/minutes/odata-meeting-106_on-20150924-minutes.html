<!DOCTYPE html>
<html lang="en">
<head>
<title>OData TC meeting #106 Thursday Sep 24, 2015</title>
</head>
<body>
<h1>OData TC meeting #106 Thursday Sep 24, 2015</h1>
<p>Acting chair: Ralf</p>
<pre>Chat transcript from room: odatatc
2015-09-24 0800-1000 PDT
</pre>
<h3>1. Roll call</h3>

<h4>1.1 Members present</h4>
<pre>
        Gerald Krause (SAP SE)
        Ken Baclawski (Northeastern University)
        Mark Biamonte (Progress Software)
        Martin Zurmuehl (SAP SE) 
        Matthew Borges (SAP SE) a.k.a. Matt
        Michael Pizzo (Microsoft) a.k.a. Mike
        Ralf Handl (SAP SE) 
        Ramesh Reddy (Red Hat)
        Stefan Hagen (Individual)
        Susan Malaika (IBM)
        Ted Jones (Red Hat)
</pre>

<p>Quorum achieved. Details cf. <a href="https://www.oasis-open.org/apps/org/workgroup/odata/event.php?event_id=39117">normative attendance sheet for this meeting</a>.</p>

<p>Notes taken by all and subsequently edited for readability by Stefan.</p>

<h3>2. Approve agenda</h3>
<p>Agenda approved as published. </p>

<h3>3. Approve minutes from previous meeting(s)</h3>

<h4>3.1 Minutes from September 17, 2015 TC meeting #105: </h4>
<p><a href="https://www.oasis-open.org/committees/download.php/56539/odata-meeting-105_on-20150917-minutes.html">https://www.oasis-open.org/committees/download.php/56539/odata-meeting-105_on-20150917-minutes.html</a></p>
<p>Minutes approved unchanged as published</p>

<h3>4. Review action items</h3>
<h4>4.1 Action items due September 24, 2015</h4>
<p>None</p>

<h3>5. Discuss grouping of issues for V4.01</h3>

<p>Below sections group issues for V4.01_WD01 in New or Open state</p>

<p>Ralf: <b>Note</b> compatibility with V4.0 - tag issues that might be problematic for clients because service responds with new features less problematic are query capabilities - service can advertise additional capabilities</p>

<h4>4.1 Annotations</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-516" target="_blank">ODATA-516</a> Add super type Edm.AnyPath for Edm.PropertyPath, Edm.NavigationPropertyPath, and Edm.AnnotationPath</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-735" target="_blank">ODATA-735</a> Enhance the CSDL for instance annotations</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-786" target="_blank">ODATA-786</a> Extend definition of edmath expression</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-811" target="_blank">ODATA-811</a> Define propagation and (partial) overriding of annotations</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-631" target="_blank">ODATA-631</a> Allow expressing that a term can be applied any collection and is not restricted to entity sets</li>
</ol>

<p>Group 1) Annotations - <b>Martin Zurmuehl</b></p>

<h4>4.2 Batch</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-480" target="_blank">ODATA-480</a> $batch: remove restriction 'within the same change set ' for Content-ID referencing</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-541" target="_blank">ODATA-541</a> Allow the If-Match header to reference the ETag that resulted from an earlier operation in a batch request</li>
</ol>

<p>Group 2) Batch - <b>Ralf Handl</b></p>


<h4>4.3 Complex Types</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-560" target="_blank">ODATA-560</a> Allow arbitrary properties in referential constraints</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-572" target="_blank">ODATA-572</a> Clarify that eq, ne can be used with complex type</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-617" target="_blank">ODATA-617</a> Allow eq/ne comparison of instances of same structured (complex or entity) type, allow eq/ne comparison with null for 0..1 nav props</li>
</ol>

<p>Group 3) Complex Types - <b>Ted Jones</b></p>


<h4>4.4 Decimal</h4>
<ul>
<li><a href="https://issues.oasis-open.org/browse/ODATA-557" target="_blank">ODATA-557</a> Allow exponential notation for Edm.Decimal</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-747" target="_blank">ODATA-747</a> Allow IEEE 754 constants [-]INF and NaN also for Edm.Decimal</li>
</ul>

<p>Group 4) Decimal - <b>Mark Biamonte</b></p>


<h4>4.5 Enum Types</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-494" target="_blank">ODATA-494</a> Define inheritance for enumeration types</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-849" target="_blank">ODATA-849</a> Add possibility for enumeration types to 'extend' another enumeration type</li>
</ol>

<p>Group 5) Enum Types - <b>Ken Baclawski</b></p>


<h4>4.6 Interfaces</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-619" target="_blank">ODATA-619</a> Attach action and function signatures to terms, i.e. make a term definition an interface definition</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-696" target="_blank">ODATA-696</a> Support 'interfaces' for casting entities to multiple different types</li>
</ol>

<p>Group 6) Interfaces - <b>Mike Pizzo</b></p>


<h4>4.7 New Query Capabilities</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-482" target="_blank">ODATA-482</a> Allow inlining stream properties and media resources</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-614" target="_blank">ODATA-614</a> Allow $expand, $select, ... with POST/PATCH/PUT in combination with return=representation to specify the response shape</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-827" target="_blank">ODATA-827</a> introduce $compute query option</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-556" target="_blank">ODATA-556</a> Add 'in' operator as syntactic sugar for a chain of 'or' expressions</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-820" target="_blank">ODATA-820</a> Allow indexing into collections</li>
</ol>

<p>Group 7) New Query Capabilities - <b>Matt Borges</b></p>


<h4>4.8 Set Operations</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-666" target="_blank">ODATA-666</a> Define Deep Update and Deep Upsert operations</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-836" target="_blank">ODATA-836</a> Allow applying actions to a filtered collection of entities</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-613" target="_blank">ODATA-613</a> Allow POST to entity sets using the delta-response format</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-615" target="_blank">ODATA-615</a> Allow PATCH and DELETE with $filter on collections to modify or delete all (and only) the matching entities</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-616" target="_blank">ODATA-616</a> Allow POST to collections of complex and primitive types, and DELETE with $filter</li>
</ol>

<p>Group 8) Set Operations - <b>Gerald Krause</b></p>


<h4>4.9 Simplified Payload</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-561" target="_blank">ODATA-561</a> odata.type shouldn't require '#'' for primitive types</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-630" target="_blank">ODATA-630</a> Consider making odata the default namespace for annotations</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-813" target="_blank">ODATA-813</a> Allow no metadata for non-OData clients</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-814" target="_blank">ODATA-814</a> Don't need TargetId in a deleted link for a to 0..1 relationship</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-809" target="_blank">ODATA-809</a> Define non-message format for final response of async request</li>
</ol>

<p>Group 9) Simplified Payload - <b>Mike Pizzo</b></p>


<h4>4.10 Simplified Syntax</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-664" target="_blank">ODATA-664</a> Consider supporting parameterless function imports with no parens</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-812" target="_blank">ODATA-812</a> Allow omitting namespaces for unambiguous functions/actions</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-763" target="_blank">ODATA-763</a> Allowing implicit aliasing of parameters (public comment c201412e00001)</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-799" target="_blank">ODATA-799</a> Define Key-As-Segment URL convention for resource paths</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-834" target="_blank">ODATA-834</a> Make type prefix optional for enumeration literals in URLs</li>
</ol>

<p>Group 10) Simplified Syntax - <b>Mike Pizzo</b></p>


<h4>4.11 OData CSDL</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-674" target="_blank">ODATA-674</a> Specify navigation property binding combined with containment</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-618" target="_blank">ODATA-618</a> Allow using term names in positions that allow type names</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-743" target="_blank">ODATA-743</a> Restructure/rename documents CSDL, JSON Format, and JSON Format for CSDL</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-798" target="_blank">ODATA-798</a> Semantic Key or Alternate Key for entity types</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-817" target="_blank">ODATA-817</a> Add client-side function odata.matchesRegularExpression</li>
</ol>

<h4>4.12 OData JSON Format</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-656" target="_blank">ODATA-656</a> Requesting clarity on payload ordering constraints for clients</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-838" target="_blank">ODATA-838</a> Allow inclusion of 'untyped JSON' into JSON requests and responses</li>
</ol>

<h4>4.13 OData Protocol</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-824" target="_blank">ODATA-824</a> Header Content-Transfer-Encoding not used in HTTP</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-846" target="_blank">ODATA-846</a> Add version 4.01</li>
</ol>

<h4>4.14 OData URL Conventions</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-850" target="_blank">ODATA-850</a> Improve document structure for functions used in common expressions</li>
</ol>

<h4>4.15 Vocabularies</h4>
<ol>
<li><a href="https://issues.oasis-open.org/browse/ODATA-571" target="_blank">ODATA-571</a> Add annotation for properties that are (not) part of the default selection if no $select is specified</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-760" target="_blank">ODATA-760</a> Add to depth restrictions to Capabilities Vocabulary</li>
<li><a href="https://issues.oasis-open.org/browse/ODATA-816" target="_blank">ODATA-816</a> Add Capability term for filter _expression_ restrictions</li>
</ol>


<h3>6.Process issues [Issues list: https://issues.oasis-open.org/issues/?jql=project%20%3D%20ODATA]</h3>

<p>Issues for V4.01_WD01 in New or Open state</p>

<h4>6.1 OData URL Conventions</h4>

<h5>6.1.1 ODATA-850 Improve document structure for functions used in common expressions</h5>
<p>Ralf: ODATA-850 is OPEN</p>
<p><b>Gerald</b>: I <b>move</b> to resolve ODATA-850 as proposed. Mike seconds.</p>

<p>ODATA-850 is resolved as proposed</p>


<h4>6.2 OData Protocol</h4>

<h5>6.2.1 ODATA-824 Header Content-Transfer-Encoding not used in HTTP</h5>
<p>Ralf: ODATA-824 is OPEN</p>
<p><b>Mike</b>: I <b>move</b> we resolve ODATA-824 as proposed, continuing to include the header in the documentation for historical purposes as something that may be returned from 4.0 services but calling out that it has been deprecated. Ted seconds.</p>

<p>ODATA-824 is resolved as proposed</p>

<h5>6.2.2 ODATA-846 Add version 4.01</h5>
<p>Ralf: ODATA-846 is OPEN</p>
<p>Mike: extend issue to also cover version negotiation and consequences on clients and services</p>
<p>Discuss once proposal covers version negotiation</p>
<p>Mike volunteers to prepare a proposal</p>


<h4>6.3 New Query Capabilities</h4>

<h5>6.3.1 ODATA-482 Allow inlining stream properties and media resources</h5>
<p>Ralf: ODATA-482 is OPEN</p>

<p>Matt: fine with base64url encoding instead of multipart format</p>
<p>Mark: could be problematic for large binaries that the service is unwilling to inline</p>
<p>Mike: $expand is currently not a hint, so $expand would be a bad choice if we want to make this more of a preference</p>
<p>Matt: requirement to only inline streams if certain conditions are met on the entity</p>
<p>Matt: return media link instead of binary data if service chooses not to include the stream</p>

<p>Discussion: Re-using $expand may be a bit messy since the expand options don't apply<br>
Would the request to expand binary be a hint or required?<br>
   --what if service is willing to return some binary values inline but not others?
<br>
In general (perhaps a separate issue), if the response returns successfully but there is an error within the payload, would we have some way to annotated the payload with an error?</p>
<p>Mike: DMTF added annotation to express warnings/infos in otherwise successful responses</p>
<p>Mike to check with DMTF if they agree to us cloning that into V4.01</p>
<p>Matt to note down discussion and concerns</p>

<h5>6.3.2 ODATA-614 Allow $expand, $select, ... with POST/PATCH/PUT in combination with return=representation to specify the response shape</h5>
<p>Ralf: ODATA-614 is OPEN</p>
<p>Mike: return=representation is a preference</p>
<p>Mike: what if the service can process the request but cannot return the representation in the requested form?</p>
<p>Ralf:</p>

<pre>
a) return nothing
b) return what it can, even if it doesn't comply with the request#
c) fail the request
</pre>
<p>Mike: add annotation for announcing this feature to the proposal, come back to it later</p>

<h5>6.3.3 ODATA-827 introduce $compute query option</h5>
<p>Ralf: ODATA-827 is OPEN</p>

<p>Mike: review the compute() transformation</p>
<p>Ralf:</p> 

<pre>
GET ~/Sales?$apply=compute(Amount mul Product/TaxRate as Tax)
GET ~/Sales?$compute=Amount mul Product/TaxRate as Tax
</pre>
<p>Mike: can the computed property be used in a $filter?</p>
<p>Mike: what can $compute return? Especially entities or collections of entities? Which wouldn't necessarily be a bad thing</p>
<p>Ralf: check Data Aggregation whether compute() is underspecified</p>

<h5>6.3.4 ODATA-556 Add "in" operator as syntactic sugar for a chain of "or" expressions</h5>
<p>Ralf: ODATA-566 is OPEN</p>
<p>Ralf:</p>
<pre>
1) Using JSON collections and a new "in" operator (1a): 

     CountryCode in ["US","CA","DE"] 

 or in a more URL-friendly notation (as double quotes and square brackets require percent-ending) (1b)

     CountryCode in ('US','CA','DE') 

2) Allowing arbitrary collection expressions on the left side of lambda expressions: 

     ["US","CA","DE"]/any(c:c eq CountryCode) 

3) Adding an overload to the contains function: 

     contains(["US","CA","DE"], CountryCode)
</pre>

<p>Matt: 1b) is closest to SQL</p>
<p>Mike and Mark agree</p>
<p>Mike: right-hand side could be a collection-valued property or other expression returning a collection of things comparable to the left side</p>
<p>Ramesh: can this also be used for complex instances as we are going to allow EQ for them?</p>
<p>Mike: could be anything where the left-hand side can be EQ-compared to an item of the right-hand side</p>
<p>Matt: do we want to cover areas that can already be done with /any() and /all()?</p>

<p>Ralf:</p>

<pre>
http://host/service/Orders?$filter=Items/any(d:d/Quantity gt 100)
http://host/service/ProductsByColor?colors=["red","green"]
</pre>

<p><b>Mike</b>: I <b>move</b> we approve ODATA-556 as proposed, as a discoverable shortcut with the same semantics as any (using syntax 1b). Matt seconds.</p>
<p>ODATA-556 is resolved as proposed with syntax variant 1b (SQL style)</p>

<h5>6.3.5 ODATA-820 Allow indexing into collections</h5>
<p>Ralf: ODATA-820 is OPEN</p>

<p>Ralf:</p>

<pre>
- path-to-collection(42) 
- path-to-collection/42
- path-to-collection(-1)
</pre>
<p>Ralf: How to advertise this? Per Property, Type, or EntityContainer?</p>
<p>Mike: allow both syntaxes, or only the one(s) matching the key style(s) supported by the service?</p>
<p>Mike: allow this only for collections of primitive and complex types, or also for collections of entities?</p>
<p>Ralf: restrict it to primitive and complex collections to avoid conflict with simple key syntax</p>
<p>Mike: don't introduce paren style at all as REST mainstream is leaning towards key-as-segment anyway</p>
<p>Mike: no necessity for multi-part indexes as we don't have collections of collections, so the /{index} should always work</p>
<p>Mike: need term definition for advertising support of this feature</p>

<h3>7. Next meeting</h3>
<p>Thursday October 01, 2015 during 8-10am PT</p>
<p>Agreed</p>

<h3>8. AOB</h3>
<p>None</p>

<h3>Meeting adjourned</h3>

</body>
</html>
