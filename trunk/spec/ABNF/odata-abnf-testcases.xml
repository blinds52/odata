<?xml version="1.0" encoding="UTF-8"?>
<TestSuite xmlns="http://docs.oasis-open.org/odata/ns/testcases">
  <Constraint Rule="entityNavigationProperty">
    <Match>Category</Match>
    <Match>Product</Match>
    <Match>Supplier</Match>
  </Constraint>
  <Constraint Rule="entityColNavigationProperty">
    <Match>Items</Match>
    <Match>Products</Match>
  </Constraint>
  <Constraint Rule="complexProperty">
    <Match>Address</Match>
  </Constraint>
  <Constraint Rule="primitiveKeyProperty">
    <Match>ID</Match>
    <Match>Size</Match>
    </Constraint>
  <Constraint Rule="primitiveNonKeyProperty">
    <Match>Name</Match>
    <Match>Rating</Match>
    <Match>Street</Match>
  </Constraint>
  <Constraint Rule="streamProperty">
    <Match>Thumbnail</Match>
  </Constraint>
  <Constraint Rule="entitySetName">
    <Match>Categories</Match>
    <Match>LeaveRequests</Match>
    <Match>Products</Match>
  </Constraint>
  <Constraint Rule="entityColServiceOp">
    <Match>ProductsByColor</Match>
  </Constraint>
  
  <TestCase Name="URI with path and trailing slash" 
            Rule="absolute-URI">
    <Input>http://My.Org:8080/MyService/</Input>
  </TestCase>
  <TestCase Name="URI without schema separator" 
            Rule="absolute-URI" 
            FailAt="4">
    <Input>http//My.Org/</Input>
  </TestCase>
  <TestCase Name="Binary with X" 
            Rule="binary">
    <Input>X'1a2B3c4D'</Input>
  </TestCase>
  <TestCase Name="Binary with binary" 
            Rule="binary">
    <Input>binary'1a2B3c4D'</Input>
  </TestCase>
  <TestCase Name="Binary with odd number of hex digits" 
            Rule="binary" 
            FailAt="5">
    <Input>X'123'</Input>
  </TestCase>
  <TestCase Name="Resource Path - Entity Set" 
            Rule="resourcePath">
    <Input>Categories</Input>
  </TestCase>
  <TestCase Name="Resource Path - Entity" 
            Rule="resourcePath">
    <Input>Categories(11)</Input>
  </TestCase>
  <TestCase Name="Resource Path - Entity" 
            Rule="resourcePath">
    <Input>Categories(ID=1)</Input>
  </TestCase>
  <TestCase Name="Key"
            Rule="string">
    <Input>'Hugo''s%20Tavern'</Input>
  </TestCase>
  <TestCase Name="Resource Path - Entity" 
            Rule="resourcePath">
    <Input>Categories(ID=1,Size=5)</Input>
  </TestCase>
  <TestCase Name="Correct Guid" 
            Rule="GUID">
    <Input>guid'01234567-89ab-cdef-0123-456789abcdef'</Input>
  </TestCase>
  <TestCase Name="Guid with wrong character" 
            Rule="GUID"
            FailAt="10">
    <Input>guid'01234g67-89ab-cdef-0123-456789abcdef'</Input>
  </TestCase>
  <TestCase Name="Guid with less than 32 digits" 
            Rule="GUID"
            FailAt="28">
    <Input>guid'01234567-89ab-cdef-456789abcdef'</Input>
  </TestCase>
  <TestCase Name="Time: a year and a day" 
            Rule="TIME">
    <Input>time'P1Y1D'</Input>
  </TestCase>
  <TestCase Name="Time: plus a year and a day" 
            Rule="TIME">
    <Input>time'+P1Y1D'</Input>
  </TestCase>
  <TestCase Name="Time: a month before" 
            Rule="TIME">
    <Input>time'-P1M'</Input>
  </TestCase>
  <TestCase Name="Time: twelve seconds" 
            Rule="TIME">
    <Input>time'PT12S'</Input>
  </TestCase>
  <TestCase Name="Time: two hours, ten minutes and three point one seconds" 
            Rule="TIME">
    <Input>time'PT2H10M3.1S'</Input>
  </TestCase>
  <TestCase Name="Time: not time on the clock" 
            Rule="TIME"
            FailAt="5">
    <Input>time'11:22:33'</Input>
  </TestCase>
  <TestCase Name="Identifier" 
            Rule="odataIdentifier">
    <Input>TheQuickBrownFoxSays42</Input>
  </TestCase>
  <TestCase Name="Identifier with leading underscores" 
            Rule="odataIdentifier">
    <Input>__ID</Input>
  </TestCase>
  <TestCase Name="Identifier: no starting digit" 
            Rule="odataIdentifier" 
            FailAt="0">
    <Input>0time</Input>
  </TestCase>
  <TestCase Name="Identifier: no dots within" 
            Rule="odataIdentifier" 
            FailAt="2">
    <Input>No.Dot</Input>
  </TestCase>
  <TestCase Name="Entity Set" 
            Rule="resourcePath">
    <Input>Container.EntitySet</Input>
  </TestCase>
  <TestCase Name="Call unbound action" 
            Rule="actionCall">
    <Input>Activation</Input>
  </TestCase>
  <TestCase Name="Call unbound action with container" 
            Rule="actionCall">
    <Input>Container.Activation()</Input>
  </TestCase>
  <TestCase Name="Call bound action" 
            Rule="resourcePath">
    <Input>LeaveRequests(4)/Rejection</Input>
  </TestCase>
  <TestCase Name="Call bound action" 
            Rule="resourcePath">
    <Input>LeaveRequests(4)/Container.Rejection()</Input>
  </TestCase>
  <!-- 
  	Test cases for example URLs in OData URI  
  	-->
  <TestCase Name="2 URL Components - service root URL" 
            Rule="odataUri">
    <Input>http://services.odata.org/OData/OData.svc/</Input>
  </TestCase>
  <TestCase Name="2 URL Components - metadata URL" 
            Rule="odataUri">
    <Input>http://services.odata.org/OData/OData.svc/$metadata</Input>
  </TestCase>
  <TestCase Name="2 URL Components - batch URL" 
            Rule="odataUri">
    <Input>http://services.odata.org/OData/OData.svc/$batch</Input>
  </TestCase>
  <TestCase Name="Service Root directly at server root" 
            Rule="odataUri">
    <Input>http://My.Org:80/</Input>
  </TestCase>
  <TestCase Name="2 URL Components - resource path" 
            Rule="resourcePath">
    <Input>Categories(1)/Products</Input>
  </TestCase>
  <TestCase Name="2 URL Components - query options" 
            Rule="queryOptions">
    <Input>$top=2&amp;$orderby=Name</Input>
  </TestCase>
  <TestCase Name="2 URL Components - resource path and query options" 
            Rule="odataRelativeUri">
    <Input>Categories(1)/Products?$top=2&amp;$orderby=Name</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - entity set" 
            Rule="entitySetName">
    <Input>Products</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - entity set" 
            Rule="resourcePath">
    <Input>Products</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - function call" 
            Rule="odataRelativeUri">
    <Input>ProductsByCategoryId(categoryId=2)</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - service operation parameter" 
            Rule="sopParameterNameAndValue">
    <Input>color='red'</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - service operation call" 
            Rule="odataRelativeUri">
    <Input>ProductsByColor?color='red'</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - single entity" 
            Rule="resourcePath">
    <Input>Categories(1)</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - bound operation on entity set" 
            Rule="resourcePath">
    <Input>Products/MostExpensive</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - follow navigation property" 
            Rule="resourcePath">
    <Input>Products(1)/Supplier</Input>
  </TestCase>
  <TestCase Name="4.1 Addressing entities - follow navigation property and call function" 
            Rule="odataRelativeUri">
    <Input>Categories(1)/Products/AllOrders</Input>
  </TestCase>
  <!-- parser cannot distinguish between entityColNavigationProperty and entityNavigationProperty, so it will pick the wrong branch and never reach the keyPredicate -->
  <TestCase Name="4.1.1 Canonical URL" 
            Rule="odataRelativeUri">
    <Input>Categories(1)/Products(1)</Input>
  </TestCase>
  <TestCase Name="4.2 Addressing Links between Entities" 
            Rule="odataRelativeUri">
    <Input>Categories(1)/$links/Products</Input>
  </TestCase>
  <!-- TODO: rule for $filter is currently broken, doesn't lead to propertyName anywhere. Example is $filter=Price%20gt%2020.0M -->
  <TestCase Name="4.3.3 Addressing Legacy Service Operations" 
            Rule="odataRelativeUri">
    <Input>GetProductsByRating?rating=3&amp;$filter=true</Input>
  </TestCase>
  <TestCase Name="4.4 Addressing a Property - simple" 
            Rule="odataRelativeUri">
    <Input>Categories(1)/ID</Input>
  </TestCase>
  <TestCase Name="4.4 Addressing a Property - complex" 
            Rule="odataRelativeUri">
    <Input>Categories(1)/Address/Street</Input>
  </TestCase>
  <TestCase Name="4.5 Addressing a Property Value" 
            Rule="odataRelativeUri">
    <Input>Categories(1)/ID/$value</Input>
  </TestCase>
  <TestCase Name="5.1.1 Filter" 
            Rule="filter">
    <Input>$filter=true</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.1 Equals" 
            Rule="eqExpr">
    <Input>true   eq false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.2 Not Equals" 
            Rule="neExpr">
    <Input>true   ne false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.3 Greater Than" 
            Rule="gtExpr">
    <Input>true   gt false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.4 Greater Than or Equal" 
            Rule="geExpr">
    <Input>true   ge false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.5 Less Than" 
            Rule="ltExpr">
    <Input>true   lt false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.6 Less Than or Equal" 
            Rule="leExpr">
    <Input>true   le false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.7 Logical And" 
            Rule="andExpr">
    <Input>true  and false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.8 Logical Or" 
            Rule="orExpr">
    <Input>true  or false</Input>
  </TestCase>
  <TestCase Name="5.1.1.1.9 Logical Negation" 
            Rule="notExpr">
    <Input>not false</Input>
  </TestCase>
  <!-- TODO: leads to timeout
  <TestCase Name="5.1.1.1.10 Logical Operator Examples" 
            Rule="filter">
    <Input>$filter=Name eq 'Milk'</Input>
  </TestCase>
  -->  
  <!-- TODO: leads to endles recursion
  <TestCase Name="5.1.1.2 Arithmetic Operators" 
            Rule="addExpr">
    <Input>5   add 5</Input>
  </TestCase>
  -->
  <!-- TODO: 5.1.1.2.x -->
  <TestCase Name="5.1.1.3 Parenthesis" 
            Rule="parenExpr">
    <Input>(true)</Input>
  </TestCase>
  <TestCase Name="5.1.1.3 Parenthesis" 
            Rule="parenExpr">
    <Input>( true )</Input>
  </TestCase>
  <!--  TODO: doesn't recognize nested andExpr
  <TestCase Name="5.1.1.3 Parenthesis" 
            Rule="parenExpr">
    <Input>(true  and false)</Input>
  </TestCase>
  <TestCase Name="5.1.1.3 Parenthesis" 
            Rule="filter">
    <Input>$filter=( 4 add 5 ) mod ( 4 sub 1 ) eq 0</Input>
  </TestCase>
  -->
  <!-- TODO: 5.1.1.4.x leads to endless recursion
  <TestCase Name="5.1.1.4.1 substringof" 
            Rule="substringOfMethodCallExpr">
    <Input>substringof('Alfreds', CompanyName)</Input>
  </TestCase>
  -->
  <TestCase Name="5.1.2 Expand - single navigation property" 
            Rule="expand">
    <Input>$expand=Items</Input>
  </TestCase>
  <TestCase Name="5.1.2 Expand - multiple navigation properties, recursive" 
            Rule="expand">
    <Input>$expand=Items,Items/Product</Input>
  </TestCase>
  <TestCase Name="5.1.3 Select - simple" 
            Rule="select">
    <Input>$select=Rating,ReleaseDate</Input>
  </TestCase>
  <TestCase Name="5.1.3 Select - with star" 
            Rule="select">
    <Input>$select=*</Input>
  </TestCase>
  <TestCase Name="5.1.3 Select - with navigation" 
            Rule="select">
    <Input>$select=Category/Name</Input>
  </TestCase>
  <TestCase Name="5.1.3 Select - with navigation and expand" 
            Rule="queryOptions">
    <Input>$select=Category/Name&amp;$expand=Category</Input>
  </TestCase>
  <TestCase Name="5.1.3 Select - with navigation and star" 
            Rule="select">
    <Input>$select=Items/ID,Items/Product/*</Input>
  </TestCase>
  <!--  TODO:
  <TestCase Name="5.1.3 Select - with property of complex property" 
            Rule="select">
    <Input>$select=Address/Street</Input>
  </TestCase>
  <TestCase Name="5.1.3 Select - tricky" 
            Rule="select">
    <Input>$select=Namespace.BestSellingProduct/Spokesperson,Supplier/Namespace.PreferredSupplier/AccountRepresentative</Input>
  </TestCase>
  <TestCase Name="5.1.3 Select - actions by container" 
            Rule="select">
    <Input>$select=Container.ActionName,Container2.*</Input>
  </TestCase>
  -->
  <TestCase Name="5.1.4 OrderBy" 
            Rule="orderby">
    <Input>$orderby=Name</Input>
  </TestCase>
  <TestCase Name="5.1.4 OrderBy asc" 
            Rule="orderby">
    <Input>$orderby=Name asc</Input>
  </TestCase>
  <TestCase Name="5.1.4 OrderBy mixed" 
            Rule="orderby">
    <Input>$orderby=Name asc,Rating,Size desc</Input>
  </TestCase>
  <TestCase Name="5.1.5 Top and Skip" 
            Rule="queryOptions">
    <Input>$top=5&amp;$skip=10</Input>
  </TestCase>
  <TestCase Name="5.1.6 Inlinecount" 
            Rule="queryOptions">
    <Input>$inlinecount=allpages</Input>
  </TestCase>
  <TestCase Name="5.1.7 Format" 
            Rule="queryOptions">
    <Input>$format=json&amp;$format=atom&amp;$format=xml&amp;$format=text/html</Input>
  </TestCase>
  <TestCase Name="5.1.7 Format - media type" 
            Rule="queryOptions">
    <Input>$format=text/html</Input>
  </TestCase>
  <TestCase Name="5.2 Custom Query Option" 
            Rule="customQueryOption">
      <Input>search=blue</Input>
  </TestCase>
  <TestCase Name="5.2 Custom Query Option" 
            Rule="customQueryOption">
      <Input>!deltatoken='201208210403'</Input>
  </TestCase>
  <TestCase Name="5.2 Custom Query Option" 
            Rule="customQueryOption">
      <Input>!special</Input>
  </TestCase>
  <TestCase Name="5.2 Custom Query Option" 
            Rule="queryOptions">
      <Input>$orderby=Name&amp;securitytoken=0412312321</Input>
  </TestCase>
</TestSuite>